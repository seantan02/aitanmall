function openCart(){$("#cart").addClass("open"),openMaskOverlay()}function closeCart(){$("#cart").removeClass("open"),closeMaskOverlay()}$(document).ready(function(){$(document).on("click",".cartBtn",function(){openCart()}),$(document).on("click",".cartCloseBtn",function(){closeCart()})}),$(document).ready(function(){$(document).on("click",".add-to-cart",function(){var e=$(this),t=e.data("target"),a=e.data("targettype"),n=!0;$(t+" input").each(function(){var e=$(this).data("name"),a=$(this).data("classname"),r=$(this).data("type");if(void 0!==a&""!=a){var c=$(t+" ."+a);"modal"==r||(c.removeClass("red-border"),c.find(".reminder").remove())}if(""==$(this).val()){alert(inValidReasonMessage=e+" was not choosen.");var c=$(t+" ."+a);return"modal"==r?(c.closest("modal").modal("show"),n=!1):($("html, body").animate({scrollTop:c.offset().top},1e3),c.addClass("red-border"),c.prepend("<span class='reminder'>"+inValidReasonMessage+"</span>"),n=!1),!1}}),$(t+" select").each(function(){var e=$(this).data("name"),a=$(this).data("classname");if(void 0!==a&""!=a){var r=$(t+" ."+a);r.removeClass("red-border"),r.find(".reminder").remove()}if(""==$(this).find("option:selected").val())return alert(inValidReasonMessage=e+" was not choosen."),$("html, body").animate({scrollTop:r.offset().top},1e3),r.addClass("red-border"),r.prepend("<span class='reminder'>"+inValidReasonMessage+"</span>"),n=!1,!1});var r=new FormData($(t)[0]);if(e.data("requestRunning")&&(alert(inValidReasonMessage="Request is being processed"),n=!1),!0!=n)return!1;e.data("requestRunning",!0),showLoader(),$.ajax({url:"/api/user_add_to_cart",type:"POST",data:r,processData:!1,contentType:!1,dataType:"json",success:function(e){1==e.passcheck?($("#cart").load(location.href+" #cart>*"),closeCart(),openCart()):4==e.passcheck&&(alert(e.msg),window.location.href=e.redirect)},error:function(e){console.log(e)},complete:function(){e.data("requestRunning",!1),hideLoader()}}).then(function(){fbq("track","AddToCart"),ttq.track("AddToCart"),"recommendedModal"==a?$("#productRecommendModal").modal("hide"):$("#productRecommendModal").length&&$("#productRecommendModal").modal("show")})}),$(document).on("click",".increase-cart-quantity-btn",function(){var e=$(this),t=e.data("id"),a=e.closest(".cart-content").attr("id"),n=new FormData;n.append("cart_item_id",t),n.append("quantity",1),n.append("action","increaseCartItemQuantity"),e.data("requestRunning")&&(isValid=!1,inValidReasonMessage="Request is being processed"),showLoader(),e.data("requestRunning",!0),$.ajax({url:"/api/user_update_cart_item",type:"POST",data:n,processData:!1,contentType:!1,dataType:"json",success:function(e){1==e.passcheck?$("#"+a).load(location.href+" #"+a+">*"):4==e.passcheck&&(alert(e.msg),window.location.href=e.redirect)},error:function(e){alert(e)},complete:function(){fbq("track","Increase Cart Item"),e.data("requestRunning",!1),hideLoader()}})}),$(document).on("click",".decrease-cart-quantity-btn",function(){var e=$(this),t=e.data("id"),a=e.closest(".cart-content").attr("id"),n=new FormData;n.append("cart_item_id",t),n.append("quantity",1),n.append("action","decreaseCartItemQuantity"),e.data("requestRunning")&&(isValid=!1,inValidReasonMessage="Request is being processed"),showLoader(),e.data("requestRunning",!0),$.ajax({url:"/api/user_update_cart_item",type:"POST",data:n,processData:!1,contentType:!1,dataType:"json",success:function(e){1==e.passcheck?$("#"+a).load(location.href+" #"+a+">*"):4==e.passcheck&&(alert(e.msg),window.location.href=e.redirect)},error:function(e){alert(e)},complete:function(){fbq("track","Decrease Cart Item"),e.data("requestRunning",!1),hideLoader()}})}),$(document).on("click",".remove-cart-quantity-btn",function(){var e=$(this),t=e.data("id"),a=e.closest(".cart-content").attr("id"),n=e.closest(".cart-item-body").find(".cart-item-quantity").val(),r=new FormData;r.append("cart_item_id",t),r.append("quantity",n),r.append("action","decreaseCartItemQuantity"),e.data("requestRunning")&&(isValid=!1,inValidReasonMessage="Request is being processed"),showLoader(),e.data("requestRunning",!0),$.ajax({url:"/api/user_update_cart_item",type:"POST",data:r,processData:!1,contentType:!1,dataType:"json",success:function(e){1==e.passcheck?$("#"+a).load(location.href+" #"+a+">*"):4==e.passcheck&&(alert(e.msg),window.location.href=e.redirect)},error:function(e){alert(e)},complete:function(){e.data("requestRunning",!1),hideLoader()}})})});